[//]: # (This file was generated from: doc/template/03-Generating-Events.mdt using the documentation_builder package on: 2022-02-22 12:08:41.325167.)
<a id='lib-service-event-service-dart-eventservice-generateforsysmachmi'></a>* event texts to be imported into the [SysmacProject] for the HMI
* PLC code to transfer PLC event status to Meyn Connnect using MQTT
* event texts to be imported by Meyn Connect
<a id='why'></a>

## Why

The goal is to always generate all the event texts, while not making any
manual changes afterwards so that:
* The event texts accurately match the PLC program (data types)
* All event texts are accurate and consistent
* Creating or updating the events is less labor intensive and less error prone
<a id='how'></a>

## How

The event documents are generated from an exported [SysmacProjectFile](https://github.com/nils-ten-hoeve/sysmac_generator/wiki/01-Sysmac-Generator#sysmac-project-file) (*.scm).
So first step in creating or updating UserAlarms is exporting the latest SysmacProject.
Then start the sysmac_generator application with the following parameters
* TODO
* [SysmacProjectFile](https://github.com/nils-ten-hoeve/sysmac_generator/wiki/01-Sysmac-Generator#sysmac-project-file) (*.scm).

It will will scan the project file for:
* a DataType named "sEvent" in the root of the data structure (without namespace).
  It will scan this data structure looking for members of OmronBaseType.BOOL.
  Each found data type will be converted to an UserAlarm.
  Each member that refers to an other BaseType.STRUCT will automatically become
  a UserAlarmGroup. Note that memberNames that start the same
  (e.g. Transport and TransportVfd) will be put in the same UserAlarmGroup.
* a HMI variable name that ends with the \sEvent base type.
  This variable name combined with the DataTypes will be used to generate
  the UserAlarm expression.
* existing UserAlarm texts. It will generate the English alarm texts using
  the DataType's in the SysmacProject. We assume that an UserAlarm text of
  other languages needs to be re-translated if the English text has changed.
  TODO check if the following is still valid:
  In this case it will mark the texts in other languages with a ! to indicate
  that the text might need to be verified by the translator agency.
  Note that the component code is automatically is updated automatically if
  this is the only thing that has changed. New alarm texts are marked with a
<a id='to-indicate-that-these-texts-need-to-be-translated-by-the-translator-agency-'></a>
  # to indicate that these texts need to be translated by the translator agency.

  The translator agencies need to remove the ! and # characters once these
  texts have been processed.

TODO check if the following is still valid:
The result will be stored in an M$ Excel file, in the same folder and
starting with the same file name as the SysmacProject file.
Open this file and scan all alarms to verify the all UserAlarm text's and
component codes are as expected. If not, fix the texts in the DataType's of
the SysmacProject and repeat the process again.

Open the SysmacProject file and delete all alarms in the HMI, when all
UserAlarm texts in the M$ Excel file are correct. Now the new UserAlarms
can be inserted by importing the M$ Excel file.

{@insert DetailsRuleExampleTest}

{@insert UserAlarmGroupExampleTest}


<a id='doc-template-eventexamples-mdt'></a>[//]: # (This file was generated by EventExamples.writeMarkDownTemplateFile on: 2022-02-22 12:08:31.844384)
<a id='event-structure'></a>
# Event Structure
[//]: # (This file was generated by EventStructureExample.writeMarkDownTemplateFile on: 2022-02-22 12:08:31.859394)
Events are defined in the EventGlobal variable. Each boolean in the EventGlobal variable structure is an event:
<table>
  <tr>
    <th colspan="3" >Variable</th>
  </tr>
  <tr>
    <th>Name</th>
    <th>Type</th>
    <th>Comment</th>
  </tr>
  <tr>
    <td>EventGlobal</td>
    <td>sEvent</td>
    <td></td>
  </tr>
</table>

<table>
  <tr>
    <th colspan="3" >Data Types</th>
  </tr>
  <tr>
    <th>Name</th>
    <th>Type</th>
    <th>Comment</th>
  </tr>
  <tr>
    <td>sEvent</td>
    <td>Struct</td>
    <td></td>
  </tr>
  <tr>
    <td>&nbsp;&nbsp;&nbsp;&nbsp;event1</td>
    <td>VbBoolean</td>
    <td>first event</td>
  </tr>
  <tr>
    <td>&nbsp;&nbsp;&nbsp;&nbsp;event2</td>
    <td>VbBoolean</td>
    <td>second event</td>
  </tr>
</table>

<table>
  <tr>
    <th colspan="2" >Generated Events</th>
  </tr>
  <tr>
    <th>Expression</th>
    <th>Message</th>
  </tr>
  <tr>
    <td>EventGlobal.event1</td>
    <td>First event</td>
  </tr>
  <tr>
    <td>EventGlobal.event2</td>
    <td>Second event</td>
  </tr>
</table>


<a id='event-component-code'></a>
# Event Component Code
[//]: # (This file was generated by EventComponentCodeExample.writeMarkDownTemplateFile on: 2022-02-22 12:08:31.868043)
A component code can be placed anywhere in a comment. It will be filtered out and added to the component code field of the Event. Component codes are normaly placed in the comments of the event structure that defines the EventGlobal Variable. You should not use component code in a structure of a library project, because this component code will be used in all the projects where it is used. Here use [IndirectComponentCode]'s instead.
<table>
  <tr>
    <th colspan="3" >Variable</th>
  </tr>
  <tr>
    <th>Name</th>
    <th>Type</th>
    <th>Comment</th>
  </tr>
  <tr>
    <td>EventGlobal</td>
    <td>sEvent</td>
    <td></td>
  </tr>
</table>

<table>
  <tr>
    <th colspan="3" >Data Types</th>
  </tr>
  <tr>
    <th>Name</th>
    <th>Type</th>
    <th>Comment</th>
  </tr>
  <tr>
    <td>sEvent</td>
    <td>Struct</td>
    <td></td>
  </tr>
  <tr>
    <td>&nbsp;&nbsp;&nbsp;&nbsp;event1</td>
    <td>VbBoolean</td>
    <td>110s3 system air pressure too low</td>
  </tr>
</table>

<table>
  <tr>
    <th colspan="3" >Generated Events</th>
  </tr>
  <tr>
    <th>Expression</th>
    <th>Component Code</th>
    <th>Message</th>
  </tr>
  <tr>
    <td>EventGlobal.event1</td>
    <td>110s3</td>
    <td>System air pressure too low</td>
  </tr>
</table>

